import testData from "@/testData/medbridge-courses.json";
import testCategories from "@/testData/medbridge-course-categories.json";
import CourseCard from "./CourseCard";
type Query = string | undefined;
// @TODO: Better type management from testdata once it's real
// @TODO:Better searching

export default function CourseCardList({ query }: { query: Query }) {
  const filteredCourses = !query
    ? testData.content
    : testData.content.filter((course) => {
        const categories = testCategories.data.find(
          (cat) => cat.id === course.id,
        )?.categories;
        return categories?.includes(query);
      });

  if (filteredCourses.length === 0) {
    return <h2>NO COURSES FOUND</h2>;
  }
  return filteredCourses.map((data: (typeof testData.content)[0]) => (
    <CourseCard key={data.title} data={data} />
  ));
}
